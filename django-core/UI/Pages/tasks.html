{% extends "index.html" %}
{% load static %}

{% block content %}
<h2>My Tasks</h2>

<div class="card">
    <button onclick="openCreateTaskModal()">âž• Add Task</button>
</div>



<div id="taskModal" class="modal hidden">
    <div class="modal-content">

        <h3>Create Task</h3>

       <input
    type="text"
    id="taskTitle"
    placeholder="Task title"
    oninput="debouncePrioritySuggest()"
/>

<textarea
    id="taskDescription"
    placeholder="Describe the task in detail..."
    rows="6"
    oninput="debouncePrioritySuggest()"
></textarea>

<div class="enhance-deadline-row">
    <button
        type="button"
        onclick="enhanceDescription()"
        class="ai-enhance-btn"
    >
        âœ¨ Enhance the description with AI
    </button>

    <div class="deadline-field">
        <label>Deadline</label>
        <input
            type="datetime-local"
            id="taskDeadline"
        />
    </div>
</div>


        <label>Priority</label>
<select id="taskPriority">
    <option value="">-- Select priority (optional) --</option>
    <option value="LOW">Low</option>
    <option value="MEDIUM">Medium</option>
    <option value="HIGH">High</option>
</select>

<small
    id="priorityHint"
    style="display:block; margin-top:4px; color:#6b7280;"
>
    ðŸ¤– AI suggestion will appear here
</small>


        <div class="modal-actions">
            <button onclick="submitTask()">Create</button>
            <button onclick="closeCreateTaskModal()">Cancel</button>
        </div>
    </div>
</div>

<div class="card">
    <h3>Filters</h3>

    <div class="filters">
        <!-- Task ID -->
        <input
            type="text"
            id="filterTaskId"
            placeholder="Task ID (e.g. TFP-3)"
        />

        <!-- Assignee -->
        <input
            type="text"
            id="filterAssignee"
            placeholder="Assignee email"
        />

        <!-- Priority -->
<select id="filterPriority">
    <option value="">All Priority</option>
    <option value="LOW">Low</option>
    <option value="MEDIUM">Medium</option>
    <option value="HIGH">High</option>
</select>

        <!-- Status -->
        <select id="filterStatus">
            <option value="">All Status</option>
            <option value="TODO">TODO</option>
            <option value="IN_PROGRESS">IN PROGRESS</option>
            <option value="DONE">DONE</option>
        </select>

        <!-- Unassigned -->
        <label class="checkbox">
            <input type="checkbox" id="filterUnassigned" />
            Unassigned
        </label>

        <button onclick="applyFilters()">Apply</button>
        <button onclick="clearFilters()">Clear</button>
    </div>
</div>


<div class="card">
    <h3>My Tasks</h3>

    

    <table class="task-table">
        <thead>
            <tr>
                <th>S.No</th>
                <th>Task ID</th>
                <th>Title</th>
                <th>Assigned To</th> <!-- NEW -->
                    <th>Priority</th> <!-- NEW -->
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="taskTableBody">
            <!-- Rows injected by JS -->
        </tbody>
    </table>
</div>



<div class="pagination" id="taskPagination">
    <button id="prevTaskBtn" onclick="prevTaskPage()">Prev</button>
    <span id="taskPageInfo" class="page-info"></span>
    <button id="nextTaskBtn" onclick="nextTaskPage()">Next</button>
</div>


{% endblock %}

{% block scripts %}
<script src="{% static 'JS/tasks.js' %}"></script>
{% endblock %}
